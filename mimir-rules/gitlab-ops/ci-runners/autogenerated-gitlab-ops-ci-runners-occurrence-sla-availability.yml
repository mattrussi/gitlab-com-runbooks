# WARNING. DO NOT EDIT THIS FILE BY HAND. USE ./mimir-rules-jsonnet/sla-rules.jsonnet TO GENERATE IT
# YOUR CHANGES WILL BE OVERRIDDEN
groups:
- name: Autogenerated Availability Rates
  interval: 5m
  rules:
  - record: gitlab:availability:ops:rate_1h
    expr: |
      sum by (env,environment,tier,type,stage) (
        (
          sum by(env,environment,tier,type,stage) (
            gitlab_service_ops:rate_1h{env="ops",type="ci-runners"}
          )
          +
          sum by (env,environment,tier,type,stage) (
            gitlab_service_apdex:weight:score_1h{env="ops",type="ci-runners"}
          )
        )
      )
  - record: gitlab:availability:success:rate_1h
    expr: |
      sum by (env,environment,tier,type,stage) (
        (
          sum by(env,environment,tier,type,stage) (
            gitlab_service_apdex:success:rate_1h{env="ops",type="ci-runners"}
          )
          +
          sum by (env,environment,tier,type,stage)(
            gitlab_service_ops:rate_1h{env="ops",type="ci-runners"} - gitlab_service_errors:rate_1h{env="ops",type="ci-runners"}
          )
        )
      )
